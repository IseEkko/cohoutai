{"version":3,"sources":["webpack:///src/views/pms/productCate/index.vue","webpack:///./src/views/pms/productCate/index.vue?a8ca","webpack:///./src/views/pms/productCate/index.vue"],"names":["pms_productCate","name","data","list","total","listLoading","listQuery","pageNum","pageSize","parentId","created","this","getList","watch","$route","route","methods","resetParentId","query","handleAddProductCate","$router","push","_this","Object","goods","then","response","console","log","handleChange","_this2","$confirm","confirmButtonText","cancelButtonText","type","params","is_tab","level","id","$message","message","duration","catch","err","fasle","handleSizeChange","val","handleCurrentChange","handleNavStatusChange","index","row","_this3","URLSearchParams","ids","append","navStatus","productCate","handleShowStatusChange","_this4","showStatus","handleShowNextLevel","path","handleTransferProduct","handleUpdate","_this5","$prompt","_ref","value","handleDelete","_this6","filters","levelFilter","disableNextLevel","views_pms_productCate","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","shadow","staticStyle","margin-top","_v","size","on","click","$event","node-key","props","children","label","expand-on-click-node","scopedSlots","_u","key","fn","ref","node","_s","active-text","change","model","callback","$$v","$set","expression","_e","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/21.45860859547864bb3a43.js","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-card class=\"operate-container\" shadow=\"never\">\n      <i class=\"el-icon-tickets\" style=\"margin-top: 5px\"></i>\n      <span style=\"margin-top: 5px\">数据列表</span>\n      <el-button\n        class=\"btn-add\"\n        @click=\"handleAddProductCate()\"\n        size=\"mini\">\n        添加\n      </el-button>\n    </el-card>\n    <div class=\"table-container\">\n       <el-tree\n      :data=\"list\"\n      node-key=\"id\"\n      :props=\"{\n        children:'sub_category',\n        label:'name'\n      }\"\n      :expand-on-click-node=\"false\">\n      <div class=\"custom-tree-node\" slot-scope=\"{ node, data }\">\n        <!-- {{JSON.stringify(node)}} -->\n        <span class=\"cat-name\">{{ node.label }}</span>\n        <span>\n          <el-switch\n            v-model=\"data.is_tab\"\n            active-text=\"导航栏\"\n            v-if=\"node.level==1\"\n            @change=\"handleChange(node)\">\n          </el-switch>\n          <el-button\n            type=\"text\"\n            size=\"mini\"\n            @click=\"handleUpdate(data)\">\n            编辑\n          </el-button>\n          <el-button\n            type=\"text\"\n            size=\"mini\"\n            @click=\"handleDelete(data)\">\n            删除\n          </el-button>\n        </span>\n      </div>\n    </el-tree>\n     \n    </div>\n   \n  </div>\n</template>\n\n<script>\n  import {fetchList,deleteProductCate,updateShowStatus,updateNavStatus} from '@/api/productCate'\n  import {getCategorys,deleteCategorys,putCategorys} from '@/apis/goods'\n\n  export default {\n    name: \"productCateList\",\n    data() {\n      return {\n        list: null,\n        total: null,\n        listLoading: true,\n        listQuery: {\n          pageNum: 1,\n          pageSize: 5\n        },\n        parentId: 0\n      }\n    },\n    created() {\n      // this.resetParentId();\n      this.getList();\n    },\n    watch: {\n      $route(route) {\n        // this.resetParentId();\n        this.getList();\n      }\n    },\n    methods: {\n      resetParentId(){\n        this.listQuery.pageNum = 1;\n        if (this.$route.query.parentId != null) {\n          this.parentId = this.$route.query.parentId;\n        } else {\n          this.parentId = 0;\n        }\n      },\n      handleAddProductCate() {\n        this.$router.push('/addProductCate');\n      },\n      getList() {\n        this.listLoading = true;\n        getCategorys().then(response => {\n          console.log(response)\n          this.listLoading = false;\n          this.list = response;\n          console.log(this.list)\n          // this.total = response;\n        });\n      },\n      // `${data.data.name+data.data.is_tab?'显示':'不显示'}在导航栏？`\n      handleChange(data) {\n        console.log(data)\n         this.$confirm(`修改在导航栏设置？`, '修改', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          let params = {\n            name:data.data.name,\n            is_tab:data.data.is_tab,\n            level:data.data.level\n          }\n          putCategorys(data.data.id,params).then(response => {\n            this.$message({\n              message: '修改成功',\n              type: 'success',\n              duration: 1000\n            });\n            // let targetIndex= -1\n            \n            // this.getList()\n          }).catch(err=> {\n            data.data.is_tab=false\n          });\n        }).catch(err=> {\n          data.data.is_tab=fasle\n        });\n      },\n      handleSizeChange(val) {\n        this.listQuery.pageNum = 1;\n        this.listQuery.pageSize = val;\n        this.getList();\n      },\n      handleCurrentChange(val) {\n        this.listQuery.pageNum = val;\n        this.getList();\n      },\n      handleNavStatusChange(index, row) {\n        let data = new URLSearchParams();\n        let ids=[];\n        ids.push(row.id)\n        data.append('ids',ids);\n        data.append('navStatus',row.navStatus);\n        updateNavStatus(data).then(response=>{\n          this.$message({\n            message: '修改成功',\n            type: 'success',\n            duration: 1000\n          });\n        });\n      },\n      handleShowStatusChange(index, row) {\n        let data = new URLSearchParams();\n        let ids=[];\n        ids.push(row.id)\n        data.append('ids',ids);\n        data.append('showStatus',row.showStatus);\n        updateShowStatus(data).then(response=>{\n          this.$message({\n            message: '修改成功',\n            type: 'success',\n            duration: 1000\n          });\n        });\n      },\n      handleShowNextLevel(index, row) {\n        this.$router.push({path: '/productCate', query: {parentId: row.id}})\n      },\n      handleTransferProduct(index, row) {\n        console.log('handleAddProductCate');\n      },\n\n      handleUpdate(row) {\n        // this.$router.push({path:'/updateProductCate',query:{id:row.id}});\n        this.$prompt('请输入新名称', '修改'+row.name, {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消'\n        }).then(({ value }) => {\n          let params = {\n            name:value,\n            is_tab:row.is_tab,\n            level:row.level\n          }\n          putCategorys(row.id, params).then(response => {\n            this.$message({\n              message: '修改成功',\n              type: 'success',\n              duration: 1000\n            });\n          }).catch(err=> {\n            this.$message({\n              type: 'error',\n              message: err\n            });       \n          });\n        }).catch(() => {\n        });\n      },\n      handleDelete( row) {\n        this.$confirm('是否要删除该品牌', '提示', {\n          confirmButtonText: '确定',\n          cancelButtonText: '取消',\n          type: 'warning'\n        }).then(() => {\n          deleteCategorys(row.id).then(response => {\n            this.$message({\n              message: '删除成功',\n              type: 'success',\n              duration: 1000\n            });\n            let targetIndex= -1\n            // this.list.forEach((item,index)=> {\n            //   if(item.id==row.id) {\n\n            //   }\n            // })\n            this.getList()\n          });\n        });\n      }\n    },\n    filters: {\n      levelFilter(value) {\n        if (value === 0) {\n          return '一级';\n        } else if (value === 1) {\n          return '二级';\n        }\n      },\n      disableNextLevel(value) {\n        if (value === 0) {\n          return false;\n        } else {\n          return true;\n        }\n      }\n    }\n  }\n</script>\n\n<style scoped>\n.cat-name{\n  margin-right: 50px;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/pms/productCate/index.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"app-container\"},[_c('el-card',{staticClass:\"operate-container\",attrs:{\"shadow\":\"never\"}},[_c('i',{staticClass:\"el-icon-tickets\",staticStyle:{\"margin-top\":\"5px\"}}),_vm._v(\" \"),_c('span',{staticStyle:{\"margin-top\":\"5px\"}},[_vm._v(\"数据列表\")]),_vm._v(\" \"),_c('el-button',{staticClass:\"btn-add\",attrs:{\"size\":\"mini\"},on:{\"click\":function($event){_vm.handleAddProductCate()}}},[_vm._v(\"\\n      添加\\n    \")])],1),_vm._v(\" \"),_c('div',{staticClass:\"table-container\"},[_c('el-tree',{attrs:{\"data\":_vm.list,\"node-key\":\"id\",\"props\":{\n      children:'sub_category',\n      label:'name'\n    },\"expand-on-click-node\":false},scopedSlots:_vm._u([{key:\"default\",fn:function(ref){\n    var node = ref.node;\n    var data = ref.data;\nreturn _c('div',{staticClass:\"custom-tree-node\"},[_c('span',{staticClass:\"cat-name\"},[_vm._v(_vm._s(node.label))]),_vm._v(\" \"),_c('span',[(node.level==1)?_c('el-switch',{attrs:{\"active-text\":\"导航栏\"},on:{\"change\":function($event){_vm.handleChange(node)}},model:{value:(data.is_tab),callback:function ($$v) {_vm.$set(data, \"is_tab\", $$v)},expression:\"data.is_tab\"}}):_vm._e(),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\"},on:{\"click\":function($event){_vm.handleUpdate(data)}}},[_vm._v(\"\\n          编辑\\n        \")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"text\",\"size\":\"mini\"},on:{\"click\":function($event){_vm.handleDelete(data)}}},[_vm._v(\"\\n          删除\\n        \")])],1)])}}])})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3c0ecc42\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/pms/productCate/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3c0ecc42\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3c0ecc42\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-3c0ecc42\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/pms/productCate/index.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}