webpackJsonp([11],{"+Hsb":function(t,e){},UgCr:function(t,e,a){"use strict";e.a=function(t){return Object(n.a)({url:"/product/update/deleteStatus",method:"post",params:t})},e.b=function(t){return Object(n.a)({url:"/product/update/newStatus",method:"post",params:t})},e.c=function(t){return Object(n.a)({url:"/product/update/recommendStatus",method:"post",params:t})};var n=a("vLgD")},caBC:function(t,e,a){"use strict";e.a=function(t,e){return Object(n.a)({url:"/sku/"+t,method:"get",params:e})};var n=a("vLgD")},gEzv:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("woOf"),s=a.n(n),o=a("UgCr"),l=a("caBC"),i=(a("3idm"),a("s/Rn"),a("mRsl"),a("MMfn")),u={keyword:null,pageNum:1,pageSize:5,publishStatus:null,verifyStatus:null,productSn:null,productCategoryId:null,brandId:null},r={name:"productList",data:function(){return{editSkuInfo:{dialogVisible:!1,productId:null,productSn:"",productAttributeCategoryId:null,stockList:[],productAttr:[],keyword:null},goodsParams:{p:1,pnum:20,c:""},operates:[{label:"商品上架",value:"publishOn"},{label:"新品",value:"publishOn"},{label:"推荐",value:"publishOn"},{label:"删除",value:"delete"}],operateType:null,listQuery:s()({},u),list:null,total:null,listLoading:!0,selectProductCateValue:null,multipleSelection:[],productCateOptions:[],brandOptions:[],publishStatusOptions:[{value:1,label:"上架"},{value:0,label:"下架"}],verifyStatusOptions:[{value:1,label:"审核通过"},{value:0,label:"未审核"}]}},created:function(){this.getList(),this.getBrandList(),this.getProductCateList()},watch:{selectProductCateValue:function(t){null!=t&&2==t.length?this.listQuery.productCategoryId=t[1]:this.listQuery.productCategoryId=null}},filters:{verifyStatusFilter:function(t){return 1===t?"审核通过":"未审核"}},methods:{getProductSkuSp:function(t,e){var a=JSON.parse(t.spData);return null!=a&&e<a.length?a[e].value:null},getBrand:function(t){var e=this;console.log(t),this.goodsParams.c=t[2],Object(i.n)(t[2]).then(function(t){e.brandOptions=t})},getList:function(){var t=this;this.listLoading=!0,Object(i.r)(this.goodsParams).then(function(e){t.listLoading=!1,console.log("goods_list"),console.log(e.data),t.list=e.data,t.total=e.total})},getBrandList:function(){var t=this;Object(i.m)().then(function(e){t.brandOptions=e})},getProductCateList:function(){var t=this;Object(i.q)().then(function(e){var a=e;t.productCateOptions=a})},handleSearchEditSku:function(){var t=this;Object(l.a)(this.editSkuInfo.productId,{keyword:this.editSkuInfo.keyword}).then(function(e){t.editSkuInfo.stockList=e.data})},handleSearchList:function(){this.listQuery.pageNum=1,this.getList()},handleAddProduct:function(){this.$router.push({path:"/addProduct"})},handleBatchOperate:function(){var t=this;null!=this.operateType?null==this.multipleSelection||this.multipleSelection.length<1?this.$message({message:"请选择要操作的商品",type:"warning",duration:1e3}):this.$confirm("是否要进行该批量操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){for(var e=[],a=0;a<t.multipleSelection.length;a++)e.push(t.multipleSelection[a].id);switch(t.operateType){case t.operates[0].value:t.updatePublishStatus(!0,e);break;case t.operates[1].value:t.updatePublishStatus(!1,e);break;case t.operates[2].value:t.updateRecommendStatus(1,e);break;case t.operates[3].value:t.updateRecommendStatus(0,e);break;case t.operates[4].value:t.updateNewStatus(1,e);break;case t.operates[5].value:t.updateNewStatus(0,e);break;case t.operates[6].value:break;case t.operates[7].value:t.updateDeleteStatus(1,e)}t.getList()}):this.$message({message:"请选择操作类型",type:"warning",duration:1e3})},handleSizeChange:function(t){this.goodsParams.p=1,this.goodsParams.pnum=t,this.getList()},handleCurrentChange:function(t){this.goodsParams.p=t,this.getList()},handleSelectionChange:function(t){this.multipleSelection=t},handlePublishStatusChange:function(t,e,a){0===e?this.updatePublishStatus(t,!1,a):1===e&&this.updatePublishStatus(t,!0,a)},handleNewStatusChange:function(t,e){var a=[];a.push(e.id),this.updateNewStatus(e.newStatus,a)},handleRecommendStatusChange:function(t,e){var a=[];a.push(e.id),this.updateRecommendStatus(e.recommandStatus,a)},handleResetSearch:function(){this.selectProductCateValue=[],this.listQuery=s()({},u)},handleDelete:function(t,e){var a=this;this.$confirm("是否要进行删除商品?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(i.i)(e.id).then(function(e){a.$message({message:"删除成功",type:"success",duration:1e3}),a.list.splice(t,1)})})},handleUpdateProduct:function(t,e){this.$router.push({path:"/updateProduct",query:{id:e.id}})},handleShowProduct:function(t,e){console.log("handleShowProduct",e),this.$router.push({path:"/updateProduct",query:{id:e.id}})},handleShowVerifyDetail:function(t,e){console.log("handleShowVerifyDetail",e)},handleShowLog:function(t,e){console.log("handleShowLog",e)},updatePublishStatus:function(t,e,a){var n=this;console.log("数据",a);var s={sale:a.on_sale,hot:a.is_hot,new:a.is_new};s[t]=e,Object(i.G)(a.id,s).then(function(t){n.$message({message:"修改成功",type:"success",duration:1e3})}).catch(function(t){console.log(t),n.$message({message:t.msg,type:"success",duration:1e3})})},updateNewStatus:function(t,e){var a=this,n=new URLSearchParams;n.append("ids",e),n.append("newStatus",t),Object(o.b)(n).then(function(t){a.$message({message:"修改成功",type:"success",duration:1e3})})},updateRecommendStatus:function(t,e){var a=this,n=new URLSearchParams;n.append("ids",e),n.append("recommendStatus",t),Object(o.c)(n).then(function(t){a.$message({message:"修改成功",type:"success",duration:1e3})})},updateDeleteStatus:function(t,e){var a=this,n=new URLSearchParams;n.append("ids",e),n.append("deleteStatus",t),Object(o.a)(n).then(function(t){a.$message({message:"删除成功",type:"success",duration:1e3})}),this.getList()}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("el-card",{staticClass:"filter-container",attrs:{shadow:"never"}},[a("div",{staticStyle:{"margin-bottom":"25px"}},[a("i",{staticClass:"el-icon-search"}),t._v(" "),a("span",[t._v("筛选搜索")]),t._v(" "),a("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",size:"small"},on:{click:function(e){t.handleSearchList()}}},[t._v("\n        查询结果\n      ")]),t._v(" "),a("el-button",{staticStyle:{float:"right","margin-right":"15px"},attrs:{size:"small"},on:{click:function(e){t.handleResetSearch()}}},[t._v("\n        重置\n      ")])],1),t._v(" "),a("div",{staticStyle:{"margin-top":"15px"}},[a("el-form",{attrs:{inline:!0,model:t.goodsParams,size:"small","label-width":"140px"}},[a("el-form-item",{attrs:{label:"输入搜索："}},[a("el-input",{staticStyle:{width:"203px"},attrs:{placeholder:"商品名称"},model:{value:t.goodsParams.q,callback:function(e){t.$set(t.goodsParams,"q",e)},expression:"goodsParams.q"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"商品分类："}},[a("el-cascader",{attrs:{clearable:"",props:{value:"id",label:"name",children:"sub_category"},options:t.productCateOptions},on:{change:t.getBrand},model:{value:t.goodsParams.c,callback:function(e){t.$set(t.goodsParams,"c",e)},expression:"goodsParams.c"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"商品品牌："}},[a("el-select",{attrs:{placeholder:"请选择品牌",clearable:""},model:{value:t.goodsParams.b,callback:function(e){t.$set(t.goodsParams,"b",e)},expression:"goodsParams.b"}},t._l(t.brandOptions,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1)],1)],1)]),t._v(" "),a("el-card",{staticClass:"operate-container",attrs:{shadow:"never"}},[a("i",{staticClass:"el-icon-tickets"}),t._v(" "),a("span",[t._v("数据列表")]),t._v(" "),a("el-button",{staticClass:"btn-add",attrs:{size:"mini"},on:{click:function(e){t.handleAddProduct()}}},[t._v("\n      添加\n    ")])],1),t._v(" "),a("div",{staticClass:"table-container"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"productTable",staticStyle:{width:"100%"},attrs:{data:t.list,border:""},on:{"selection-change":t.handleSelectionChange}},[a("el-table-column",{attrs:{label:"编号",align:"center",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.$index+1))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"商品名称",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"商品品牌",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.brand.name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"商品分类",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.category.name))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"价格/货号",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v("价格：￥"+t._s(e.row.shop_price))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"标签",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v("上架：\n            "),a("el-switch",{attrs:{"active-value":!0,"inactive-value":!1},on:{change:function(a){t.handlePublishStatusChange("sale",e.$index,e.row)}},model:{value:e.row.on_sale,callback:function(a){t.$set(e.row,"on_sale",a)},expression:"scope.row.on_sale"}})],1),t._v(" "),a("p",[t._v("新品：\n            "),a("el-switch",{attrs:{"active-value":!0,"inactive-value":!1},on:{change:function(a){t.handlePublishStatusChange("new",e.$index,e.row)}},model:{value:e.row.is_new,callback:function(a){t.$set(e.row,"is_new",a)},expression:"scope.row.is_new"}})],1),t._v(" "),a("p",[t._v("推荐：\n            "),a("el-switch",{attrs:{"active-value":!0,"inactive-value":!1},on:{change:function(a){t.handlePublishStatusChange("hot",e.$index,e.row)}},model:{value:e.row.is_hot,callback:function(a){t.$set(e.row,"is_hot",a)},expression:"scope.row.is_hot"}})],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"160",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.handleShowProduct(e.$index,e.row)}}},[t._v("查看详情\n            ")])],1),t._v(" "),a("p",[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.handleDelete(e.$index,e.row)}}},[t._v("删除\n            ")])],1)]}}])})],1)],1),t._v(" "),a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{background:"",layout:"total, sizes,prev, pager, next,jumper","page-size":t.goodsParams.pnum,"current-page":t.goodsParams.p,total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.$set(t.goodsParams,"p",e)}}})],1)],1)},staticRenderFns:[]};var d=a("VU/8")(r,c,!1,function(t){a("+Hsb")},null,null);e.default=d.exports}});
//# sourceMappingURL=11.14d989fb1a1c4dff37aa.js.map