webpackJsonp([20],{A8Sd:function(e,t){},iqnC:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n("mRsl"),n("s/Rn");var i=n("MMfn"),a=n("TZVV"),l=n("sl7S"),o={name:"ProductInfoDetail",props:{isEdit:{type:Boolean,default:!1}},components:{SingleUpload:a.a,MultiUpload:l.a},data:function(){return{disabled:!1,isEdit:!1,imgList:[],imgs:[],bannerInfo:{},newbannerInfo:{},disabledImg:!1,dialogVisiblenew:!1,dialogVisible:!1,params:{}}},created:function(){this.getBannerList()},computed:{productId:function(){return this.value.id}},watch:{},methods:{edit:function(){this.disabled=!1},handleAdd:function(){this.dialogVisiblenew=!0},handleUpdate:function(e,t){this.bannerInfo=t,this.dialogVisible=!0},handleDialogConfirm:function(){var e=this;Object(i.B)(this.bannerInfo.id,{index:this.bannerInfo.index,url:this.bannerInfo.url}).then(function(t){e.$notify({title:"提示",message:"修改成功",type:"success"}),e.dialogVisible=!1}).catch(function(t){e.$notify({title:"错误",message:t.msg,type:"error"}),e.dialogVisible=!1})},getImg:function(e){console.log(e),this.newbannerInfo.image=e[0].url},updateBanner:function(e,t){var n=this;this.$prompt("请输入跳转的url","修改",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(a){a.value;Object(i.B)(e,{index:t}).then(function(e){n.$notify({title:"提示",message:"修改成功",type:"success"})})})},getBannerList:function(){var e=this;Object(i.j)().then(function(t){t.forEach(function(e){e.url=e.image}),e.imgList=t})},changeIndex:function(e,t){var n=this;Object(i.B)(e,{index:t}).then(function(e){n.$notify({title:"提示",message:"修改成功",type:"success"})})},deleteBanner:function(e,t){var n=this;Object(i.e)(e).then(function(e){n.$notify({title:"提示",message:"修改成功",type:"success"}),n.imgList.splice(t,1)})},finishCommit:function(e){var t=this;console.log(this.newbannerInfo),this.newbannerInfo.index=Number(this.newbannerInfo.index),Object(i.a)(this.newbannerInfo).then(function(e){t.$notify({title:"提示",message:"修改成功",type:"success"}),t.dialogVisiblenew=!1,t.newbannerInfo={},t.getBannerList()}).catch(function(e){t.$notify({title:"提示",message:"新增错误",type:"error"}),t.dialogVisiblenew=!1,t.newbannerInfo={}})},handleBrandChange:function(e){for(var t="",n=0;n<this.brandOptions.length;n++)if(this.brandOptions[n].value===e){t=this.brandOptions[n].label;break}this.value.brandName=t}}},s={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{"margin-top":"50px"}},[n("el-card",{staticClass:"operate-container",attrs:{shadow:"never"}},[n("i",{staticClass:"el-icon-tickets"}),e._v(" "),n("span",[e._v("轮播图列表")]),e._v(" "),n("el-button",{staticClass:"btn-add",attrs:{size:"mini"},on:{click:function(t){e.handleAdd()}}},[e._v("添加")])],1),e._v(" "),n("div",{staticClass:"table-container"},[n("el-table",{ref:"brandTable",staticStyle:{width:"100%"},attrs:{data:e.imgList,border:""}},[n("el-table-column",{attrs:{label:"轮播顺序",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.index)+"\n        ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"跳转地址",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("a",{attrs:{href:t.row.url,target:"_blank"}},[e._v("点击链接跳转")])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"图片",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){return[n("img",{staticClass:"imgs",attrs:{src:e.row.image,alt:""}})]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"200",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{size:"mini"},on:{click:function(n){e.handleUpdate(t.$index,t.row)}}},[e._v("编辑\n          ")]),e._v(" "),n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){e.deleteBanner(t.$index,t.row)}}},[e._v("删除\n          ")])]}}])})],1)],1),e._v(" "),n("el-dialog",{attrs:{title:"添加分类",visible:e.dialogVisible,width:"40%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-form",{ref:"resourceCategoryForm",attrs:{model:e.bannerInfo,"label-width":"150px",size:"small"}},[n("el-form-item",{attrs:{label:"跳转地址："}},[n("el-input",{staticStyle:{width:"450px"},model:{value:e.bannerInfo.url,callback:function(t){e.$set(e.bannerInfo,"url",t)},expression:"bannerInfo.url"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"排序："}},[n("el-input",{staticStyle:{width:"450px"},model:{value:e.bannerInfo.index,callback:function(t){e.$set(e.bannerInfo,"index",t)},expression:"bannerInfo.index"}})],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.handleDialogConfirm()}}},[e._v("确 定")])],1)],1),e._v(" "),n("el-dialog",{attrs:{title:"添加分类",visible:e.dialogVisiblenew,width:"40%"},on:{"update:visible":function(t){e.dialogVisiblenew=t}}},[n("el-form",{ref:"resourceCategoryForm",attrs:{model:e.bannerInfo,"label-width":"150px",size:"small"}},[n("el-form-item",{attrs:{label:"跳转地址："}},[n("el-input",{staticStyle:{width:"350px"},model:{value:e.newbannerInfo.url,callback:function(t){e.$set(e.newbannerInfo,"url",t)},expression:"newbannerInfo.url"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"排序："}},[n("el-input",{staticStyle:{width:"350px"},model:{value:e.newbannerInfo.index,callback:function(t){e.$set(e.newbannerInfo,"index",t)},expression:"newbannerInfo.index"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"图片："}},[n("multi-upload",{attrs:{disabled:e.disabledImg,maxCount:"1"},on:{input:e.getImg},model:{value:e.imgs,callback:function(t){e.imgs=t},expression:"imgs"}})],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:function(t){e.dialogVisiblenew=!1}}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.finishCommit}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var r=n("VU/8")(o,s,!1,function(e){n("A8Sd")},"data-v-68720ea9",null);t.default=r.exports}});
//# sourceMappingURL=20.b40aa232ab6996eb4d2f.js.map